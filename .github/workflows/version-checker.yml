name: Version Checker CI

on:
  push:
    branches: "main"
    paths:
      - 'docker/**'
      - '.github/workflows/**'

  schedule:
    - cron:  '0 0 * * *'
  workflow_dispatch:

env:
  BOT_TOKEN: "${{ secrets.BOT_TOKEN }}"
  CHAT_ID: "${{ secrets.CHAT_ID }}"
  TOPIC_ID: "${{ secrets.TOPIC_ID}}"

jobs:
  build-push:
    runs-on: ubuntu-latest
    steps:

    - name: checkout repo
      uses: actions/checkout@v4
      with:
        token: ${{ github.token }}

    - name: "Cancelling duplicate workflow runs"
      uses: styfle/cancel-workflow-action@0.12.0
      with:
        all_but_latest: true
        access_token: ${{ github.token }}

    - name: Check New Versions
      run: |
            chmod +x ./commit.sh
            ./commit.sh




